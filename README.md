# 🧶 Roundy - 編み図リーダー

アメリカ式編み図の PDF ファイルをアップロードして、ラウンドごとに表示できる Web アプリケーションです。編み物をしながら、一つずつのラウンドに集中できるように設計されています。

## ✨ 機能

### 📄 PDF アップロード機能

- アメリカ式編み図の PDF ファイルをアップロード
- 自動でテキストを抽出・解析
- Round、Rnd、Row、R 等の表記を自動検出

### 🌏 日本語翻訳機能

- **英語の編み物用語を日本語に自動翻訳**
- 棒針編み・かぎ針編みの両方に対応
- 豊富な用語辞書（200 以上の用語）
- 英語・日本語を並べて表示
- 翻訳辞書のカスタマイズ可能

### 📚 ラウンド別表示

- 編み図を各ラウンドごとに分割表示
- 現在のラウンドに集中できるシンプルな UI
- 大きな文字で読みやすい表示
- 英語原文と日本語翻訳を同時表示

### 🎯 進捗管理

- 現在のラウンド番号と全体数を表示
- プログレスバーで進捗を視覚化
- パーセンテージ表示で達成感をアップ
- **自動保存機能**で進捗を永続化

### 🎮 簡単操作

- **前へ/次へボタン** でラウンド間を移動
- **リセットボタン** で最初のラウンドに戻る
- **コピーボタン** で英語・日本語両方をクリップボードにコピー
- **スリープ防止ボタン** で画面の自動消灯を防止
- **ヘルプボタン** でキーボードショートカットを確認

### ⌨️ キーボードショートカット

- `←` : 前のラウンドへ
- `→` : 次のラウンドへ
- `Home` : 最初のラウンドへ
- `Escape` : ヘルプモーダルを閉じる

### 📱 モバイル対応

- **左スワイプ** : 次のラウンドへ
- **右スワイプ** : 前のラウンドへ
- レスポンシブデザインでスマートフォンでも快適
- **スリープ防止機能**でモバイルでも画面が消えない

### 💾 自動保存

- 現在の進捗をローカルストレージに自動保存
- ブラウザを再起動しても進捗を維持
- **保存データ管理機能**で不要なデータを削除可能

### 🛡️ スリープ防止機能

- **Wake Lock API** と **NoSleep.js** の両方に対応
- iOS、Android、PC すべてでスリープを防止
- ワンクリックで ON/OFF 切り替え可能

## 🚀 使い方

### 1. セットアップ

このプロジェクトはシンプルな Web アプリケーションなので、特別なインストールは不要です。

```bash
# リポジトリをクローン
git clone [リポジトリURL]
cd roundy

# Web サーバーで起動（複数の方法があります）

# 方法1: Python3 を使用
python3 -m http.server 8000

# 方法2: Node.js がある場合
npx serve .

# 方法3: PHP がある場合
php -S localhost:8000

# 方法4: Visual Studio Code の Live Server 拡張機能を使用
# (推奨：最も簡単な方法)

# ブラウザでアクセス
# http://localhost:8000
```

### 2. PDF ファイルの準備

- アメリカ式編み図の PDF ファイルを用意
- Round、Rnd、Row、R 等の表記が含まれている必要があります

### 3. アプリの使用

1. **PDF ファイルを選択**ボタンをクリック
2. 編み図 PDF ファイルを選択
3. 自動解析完了後、ラウンド別表示が開始
4. **英語原文**と**日本語翻訳**が並べて表示されます
5. **次へ/前へ**ボタンまたはキーボード/スワイプで操作
6. **スリープ防止ボタン**で画面の自動消灯を防げます

## 🛠️ 技術仕様

### 使用技術

- **HTML5** - 基本構造
- **CSS3** - スタイリング・レスポンシブデザイン
- **Vanilla JavaScript** - アプリケーションロジック
- **PDF.js** - PDF 解析・テキスト抽出
- **Font Awesome** - アイコン
- **NoSleep.js** - スリープ防止（iOS 対応）
- **Wake Lock API** - スリープ防止（Android/PC）

### ブラウザサポート

- Chrome (推奨)
- Firefox
- Safari (iOS 含む)
- Edge

### 必要な機能

- `navigator.clipboard` API (コピー機能)
- `localStorage` (進捗保存)
- `FileReader` API (ファイル読み込み)
- `navigator.wakeLock` API (スリープ防止・オプション)

## 📁 ファイル構成

```
roundy/
├── index.html                    # メインHTMLファイル
├── script.js                     # JavaScriptアプリケーションロジック
├── style.css                     # CSSスタイル
├── knitting-dictionary.js        # 編み物用語翻訳辞書
├── 編み物用語翻訳一覧.md          # 翻訳用語の一覧（参考資料）
├── README.md                     # このファイル
├── .github/                      # GitHub設定
└── .git/                         # Git管理ファイル
```

## 🎯 対応パターン

以下の表記を自動認識してラウンド分割を行います：

- `Round 1:` / `Round 1`
- `Rnd 1:` / `Rnd 1`
- `Row 1:` / `Row 1`
- `R 1:` / `R 1`
- `ROUND 1:` (大文字)
- `1. Round` (番号付き)
- `1 - Round` / `1: Round`
- `第1ラウンド` / `第1段` (日本語)

## 🌏 翻訳機能詳細

### 対応用語

- **棒針編み**: K (表編み), P (裏編み), K2tog (左上 2 目一度), SSK (右上 2 目一度) など
- **かぎ針編み**: SC (細編み), DC (長編み), CH (鎖編み), SL ST (引き抜き編み) など
- **共通用語**: YO (掛け目), INC (増し目), DEC (減らし目) など
- **計 200 以上の用語**に対応

### 翻訳辞書のカスタマイズ

`knitting-dictionary.js` ファイルを編集することで、翻訳をカスタマイズできます：

```javascript
const KNITTING_DICTIONARY = {
  // 新しい用語を追加
  your_term: "あなたの翻訳",

  // 既存の翻訳を変更
  k2tog: "お好みの翻訳",
};
```

## 🔧 カスタマイズ

### フォントサイズの調整

`style.css`の`.pattern-block`セクションでフォントサイズを変更できます：

```css
.pattern-block {
  font-size: 1.2rem; /* お好みのサイズに変更 */
}
```

### 色テーマの変更

CSS 変数を使用しているため、`style.css`の`:root`セクションで簡単にテーマ色を変更可能です：

```css
:root {
  --primary-color: #your-color;
  --secondary-color: #your-color;
}
```

## 🐛 トラブルシューティング

### PDF が読み込めない場合

- PDF がテキスト化可能か確認してください
- 画像のみの PDF の場合、テキスト抽出ができません
- Round/Rnd/Row 等の表記があるか確認してください

### パターンが正しく分割されない場合

- PDF のテキスト形式が想定と異なる可能性があります
- ブラウザの開発者ツールのコンソールでエラーを確認してください

### 翻訳が正しくない場合

- `knitting-dictionary.js` で用語の翻訳をカスタマイズできます
- 新しい用語は辞書に追加してください

### スリープ防止が効かない場合

- ブラウザが Wake Lock API に対応していない可能性があります
- NoSleep.js がフォールバックとして動作します
- ユーザーの操作が必要な場合があります

## 🔒 プライバシー

- アップロードされた PDF ファイルはローカルで処理されます
- データはサーバーに送信されません
- 進捗情報のみローカルストレージに保存されます
- 翻訳処理もすべてローカルで実行されます

## 📝 ライセンス

このプロジェクトはオープンソースです。自由に使用・改変してください。

## 🤝 コントリビューション

バグ報告や機能改善の提案を歓迎します！

### 翻訳の改善

`knitting-dictionary.js` や `編み物用語翻訳一覧.md` の改善提案もお待ちしています。

---

Happy Crafting! 🧶✨
